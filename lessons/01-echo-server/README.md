# Lesson 01: Echo Server（エコーサーバー）

## 学習目標

この Lesson では、TCP/IP通信の最も基本的な概念を学びます：

1. **ソケットの作成** - `socket()` でネットワーク通信の端点を作成
2. **アドレスのバインド** - `bind()` でIPアドレスとポート番号を紐付け
3. **接続の待ち受け** - `listen()` で接続要求を待つ
4. **接続の受け入れ** - `accept()` でクライアントからの接続を受け入れ
5. **データの送受信** - `send()` と `recv()` でデータをやり取り
6. **ソケットの終了** - `close()` でソケットを閉じる

## エコーサーバーとは

送られてきたメッセージをそのまま送り返すサーバーです。TCP/IP通信の基本を理解するのに最適な教材です。

```
クライアント          サーバー
    |                    |
    |--- "Hello" ------->|
    |<-- "Hello" --------|
    |                    |
```

## 実行方法

### 1. ビルド

```bash
make
```

### 2. サーバーを起動（ターミナル1）

```bash
./server
```

出力例:
```
サーバーを起動しました。ポート 8080 で接続を待っています...
```

### 3. クライアントを起動（ターミナル2）

```bash
./client
```

出力例:
```
サーバーに接続しました。
メッセージを入力してください（終了するには 'quit' と入力）:
```

### 4. メッセージを送信

```
Hello, TCP/IP!
```

出力例:
```
サーバーからの返答: Hello, TCP/IP!
```

### 5. 終了

```
quit
```

## ソケットAPI解説

| 関数 | 役割 | 使用場所 |
|------|------|----------|
| `socket()` | ソケット作成 | サーバー、クライアント |
| `bind()` | アドレス・ポート紐付け | サーバーのみ |
| `listen()` | 接続待ち開始 | サーバーのみ |
| `accept()` | 接続受け入れ | サーバーのみ |
| `connect()` | サーバーへ接続 | クライアントのみ |
| `send()` | データ送信 | サーバー、クライアント |
| `recv()` | データ受信 | サーバー、クライアント |
| `close()` | ソケット閉じる | サーバー、クライアント |

## 演習問題

1. サーバーを起動せずにクライアントを起動するとどうなりますか？
2. 同じポートで2つのサーバーを起動しようとするとどうなりますか？
3. クライアントを終了した後、サーバーは何をしていますか？

## 次のステップ

[Lesson 02: Chat](../02-chat/) で双方向通信を学びましょう。
